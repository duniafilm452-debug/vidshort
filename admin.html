<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Upload Video</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-video"></i>
                    <h2>Video Admin</h2>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" data-page="upload">
                    <i class="fas fa-upload"></i>
                    <span>Upload Video</span>
                </a>
                <a href="#" class="nav-link" data-page="videos">
                    <i class="fas fa-list"></i>
                    <span>Daftar Video</span>
                </a>
                <a href="#" class="nav-link" data-page="links">
                    <i class="fas fa-link"></i>
                    <span>Link Dibagikan</span>
                </a>
                <a href="#" class="nav-link" data-page="stats">
                    <i class="fas fa-chart-bar"></i>
                    <span>Statistik</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="user-details">
                        <h4>Administrator</h4>
                        <p>Super Admin</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Upload Page -->
            <div class="page active" id="uploadPage">
                <div class="page-header">
                    <h1><i class="fas fa-cloud-upload-alt"></i> Upload Video Baru</h1>
                    <p>Unggah video dengan URL dari Cloudflare R2</p>
                </div>

                <div class="upload-card">
                    <div class="form-group">
                        <label for="videoTitle">
                            <i class="fas fa-heading"></i> Judul Video
                        </label>
                        <input type="text" id="videoTitle" placeholder="Masukkan judul video...">
                        <small class="form-hint">Judul akan ditampilkan di halaman akses video</small>
                    </div>

                    <div class="form-group">
                        <label for="videoUrl">
                            <i class="fas fa-link"></i> URL Video (Cloudflare R2)
                        </label>
                        <input type="url" id="videoUrl" placeholder="https://pub-XXXX.r2.dev/video.mp4">
                        <div class="url-example">
                            <p><i class="fas fa-lightbulb"></i> Contoh URL Cloudflare R2:</p>
                            <code>https://pub-1f2a3c2a9f094a0590db6876d6ca2adf.r2.dev/video.mp4</code>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="videoDescription">
                            <i class="fas fa-align-left"></i> Deskripsi Video (Opsional)
                        </label>
                        <textarea id="videoDescription" rows="4" placeholder="Deskripsi tentang video ini..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary" id="previewBtn">
                            <i class="fas fa-eye"></i> Preview Link
                        </button>
                        <button class="btn btn-primary" id="uploadBtn">
                            <i class="fas fa-paper-plane"></i> Upload & Buat Link
                        </button>
                    </div>

                    <div class="preview-container" id="previewContainer">
                        <div class="preview-header">
                            <h4><i class="fas fa-external-link-alt"></i> Preview Link</h4>
                        </div>
                        <div class="link-preview" id="linkPreview">
                            <code>https://yourdomain.com/?v=<span id="previewId">[ID-VIDEO]</span></code>
                        </div>
                        <button class="btn btn-copy" id="copyPreviewBtn">
                            <i class="fas fa-copy"></i> Salin Link
                        </button>
                    </div>
                </div>

                <div class="info-card">
                    <h3><i class="fas fa-info-circle"></i> Petunjuk Upload</h3>
                    <ol>
                        <li>Pastikan video sudah diupload ke Cloudflare R2</li>
                        <li>Salin URL video dari Cloudflare R2</li>
                        <li>Masukkan judul dan URL video</li>
                        <li>Klik "Upload & Buat Link" untuk membuat tautan unik</li>
                        <li>Bagikan tautan yang dihasilkan kepada pengguna</li>
                    </ol>
                </div>
            </div>

            <!-- Videos List Page -->
            <div class="page" id="videosPage">
                <div class="page-header">
                    <h1><i class="fas fa-film"></i> Daftar Video</h1>
                    <div class="header-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="Cari video...">
                        </div>
                    </div>
                </div>

                <div class="videos-grid" id="videosGrid">
                    <!-- Videos will be loaded here -->
                    <div class="loading-state">
                        <div class="spinner"></div>
                        <p>Memuat daftar video...</p>
                    </div>
                </div>
            </div>

            <!-- Links Page -->
            <div class="page" id="linksPage">
                <div class="page-header">
                    <h1><i class="fas fa-share-alt"></i> Tautan Dibagikan</h1>
                </div>

                <div class="links-table-container">
                    <table class="links-table" id="linksTable">
                        <thead>
                            <tr>
                                <th>Judul Video</th>
                                <th>Link Akses</th>
                                <th>Dibuat</th>
                                <th>Views</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Links will be loaded here -->
                            <tr>
                                <td colspan="5" class="loading-row">
                                    <div class="spinner"></div>
                                    Memuat data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Stats Page -->
            <div class="page" id="statsPage">
                <div class="page-header">
                    <h1><i class="fas fa-chart-line"></i> Statistik</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalVideos">0</h3>
                            <p>Total Video</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalViews">0</h3>
                            <p>Total Views</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="activeLinks">0</h3>
                            <p>Link Aktif</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="todayViews">0</h3>
                            <p>Views Hari Ini</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3><i class="fas fa-history"></i> Aktivitas Terbaru</h3>
                    <div class="activity-list" id="activityList">
                        <!-- Activity will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div class="modal" id="successModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-check-circle"></i> Berhasil!</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h4>Video berhasil diupload!</h4>
                    <p>Link akses video telah dibuat. Salin dan bagikan link berikut:</p>
                    
                    <div class="generated-link">
                        <input type="text" id="generatedLink" readonly>
                        <button class="btn btn-copy" id="copyLinkBtn">
                            <i class="fas fa-copy"></i> Salin
                        </button>
                    </div>
                    
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="closeModalBtn">
                            <i class="fas fa-times"></i> Tutup
                        </button>
                        <button class="btn btn-primary" id="testLinkBtn">
                            <i class="fas fa-external-link-alt"></i> Test Link
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="admin.js"></script>
</body>
</html>